{% extends "base.html" %}
{% block title %}Í≤∞Í≥º - M.C THE MAX Ï¥àÏÑ±ÌÄ¥Ï¶à{% endblock %}
{% block content %}
<div class="result-hero">
    <h2>ÌÄ¥Ï¶à ÏôÑÎ£å!</h2>
    <div class="final-score">
        <span class="score-number">{{ score }}</span>
        <span class="score-total">/ {{ total }}Ï†ê</span>
    </div>
    {% set pct = (score / total * 100) | int if total > 0 else 0 %}
    <div class="score-grade">
        {% if pct >= 90 %}
            <span class="grade s">S</span> ÏßÑÏ†ïÌïú M.C the MAX Ìå¨!
        {% elif pct >= 70 %}
            <span class="grade a">A</span> ÍΩ§ Ïûò ÏïåÍ≥† ÏûàÎÑ§Ïöî!
        {% elif pct >= 50 %}
            <span class="grade b">B</span> ÎÇòÏÅòÏßÄ ÏïäÏïÑÏöî!
        {% elif pct >= 30 %}
            <span class="grade c">C</span> Ï°∞Í∏à Îçî Îì§Ïñ¥Î≥¥ÏÑ∏Ïöî!
        {% else %}
            <span class="grade d">D</span> Ïï®Î≤î Ï†ïÏ£ºÌñâ Ï∂îÏ≤ú!
        {% endif %}
    </div>
</div>

<div class="result-detail">
    <h3>Î¨∏Ï†úÎ≥Ñ Í≤∞Í≥º</h3>
    <div class="result-list">
        {% for r in results %}
        <div class="result-item {% if r.correct %}good{% else %}bad{% endif %}">
            <div class="result-q-header">
                <span class="q-no">#{{ r.question_no }}</span>
                <span class="result-emoji">{{ 'üòÉ' if r.correct else 'ü•≤' }}</span>
                {% if r.difficulty %}
                <span class="badge badge-{{ r.difficulty }}">{{ r.difficulty }}</span>
                {% endif %}
                <span class="q-score">{{ r.score }}Ï†ê</span>
            </div>
            <div class="result-chosung">{% for line in r.chosung.split('\n') %}{{ line }}{% if not loop.last %}<br>{% endif %}{% endfor %}</div>
            <div class="result-answers">
                <div class="answer-row">
                    <span class="label">Ï†ïÎãµ:</span>
                    <span class="value">{{ r.correct_title }}</span>
                </div>
                {% if r.user_title %}
                <div class="answer-row">
                    <span class="label">ÎÇ¥ Îãµ:</span>
                    <span class="value {% if r.correct %}correct{% else %}wrong{% endif %}">{{ r.user_title }}</span>
                </div>
                {% endif %}
                <div class="answer-row">
                    <span class="label">Í∞ÄÏÇ¨:</span>
                    <span class="value">{% for line in r.correct_lyrics.split('\n') %}{{ line }}{% if not loop.last %}<br>{% endif %}{% endfor %}</span>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

<div class="btn-row center">
    <a href="/" class="btn btn-primary">Îã§Ïãú ÎèÑÏ†ÑÌïòÍ∏∞</a>
</div>
{% endblock %}
